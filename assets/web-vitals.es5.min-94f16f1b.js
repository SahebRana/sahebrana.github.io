var c,p,y=function(){return"".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)},u=function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;return{name:i,value:t,delta:0,entries:[],id:y(),isFinal:!1}},m=function(i,t){try{if(PerformanceObserver.supportedEntryTypes.includes(i)){var n=new PerformanceObserver(function(e){return e.getEntries().map(t)});return n.observe({type:i,buffered:!0}),n}}catch{}},S=!1,h=!1,F=function(i){S=!i.persisted},T=function(){addEventListener("pagehide",F),addEventListener("beforeunload",function(){})},l=function(i){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];h||(T(),h=!0),addEventListener("visibilitychange",function(n){var e=n.timeStamp;document.visibilityState==="hidden"&&i({timeStamp:e,isUnloading:S})},{capture:!0,once:t})},d=function(i,t,n,e){var r;return function(){n&&t.isFinal&&n.disconnect(),t.value>=0&&(e||t.isFinal||document.visibilityState==="hidden")&&(t.delta=t.value-(r||0),(t.delta||t.isFinal||r===void 0)&&(i(t),r=t.value))}},b=function(i){var t,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=u("CLS",0),r=function(a){a.hadRecentInput||(e.value+=a.value,e.entries.push(a),t())},s=m("layout-shift",r);s&&(t=d(i,e,s,n),l(function(a){var o=a.isUnloading;s.takeRecords().map(r),o&&(e.isFinal=!0),t()}))},v=function(){return c===void 0&&(c=document.visibilityState==="hidden"?0:1/0,l(function(i){var t=i.timeStamp;return c=t},!0)),{get timeStamp(){return c}}},L=function(i){var t,n=u("FCP"),e=v(),r=m("paint",function(s){s.name==="first-contentful-paint"&&s.startTime<e.timeStamp&&(n.value=s.startTime,n.isFinal=!0,n.entries.push(s),t())});r&&(t=d(i,n,r))},E=function(i){var t=u("FID"),n=v(),e=function(a){a.startTime<n.timeStamp&&(t.value=a.processingStart-a.startTime,t.entries.push(a),t.isFinal=!0,s())},r=m("first-input",e),s=d(i,t,r);r?l(function(){r.takeRecords().map(e),r.disconnect()},!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay(function(a,o){o.timeStamp<n.timeStamp&&(t.value=a,t.isFinal=!0,t.entries=[{entryType:"first-input",name:o.type,target:o.target,cancelable:o.cancelable,startTime:o.timeStamp,processingStart:o.timeStamp+a}],s())})},w=function(){return p||(p=new Promise(function(i){return["scroll","keydown","pointerdown"].map(function(t){addEventListener(t,i,{once:!0,passive:!0,capture:!0})})})),p},P=function(i){var t,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=u("LCP"),r=v(),s=function(f){var g=f.startTime;g<r.timeStamp?(e.value=g,e.entries.push(f)):e.isFinal=!0,t()},a=m("largest-contentful-paint",s);if(a){t=d(i,e,a,n);var o=function(){e.isFinal||(a.takeRecords().map(s),e.isFinal=!0,t())};w().then(o),l(o,!0)}},C=function(i){var t,n=u("TTFB");t=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var r=performance.timing,s={entryType:"navigation",startTime:0};for(var a in r)a!=="navigationStart"&&a!=="toJSON"&&(s[a]=Math.max(r[a]-r.navigationStart,0));return s}();n.value=n.delta=e.responseStart,n.entries=[e],n.isFinal=!0,i(n)}catch{}},document.readyState==="complete"?setTimeout(t,0):addEventListener("pageshow",t)};export{b as getCLS,L as getFCP,E as getFID,P as getLCP,C as getTTFB};
